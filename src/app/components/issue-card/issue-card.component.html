<div class="issue-card glass-card" (click)="onCardClick($event)">
  <!-- Issue Header -->
  <div class="issue-header">
    <div class="hierarchy-path">
      <a [href]="getProjectUrl()" 
         (click)="onHierarchyClick($event, 'project')"
         class="hierarchy-link project-name" 
         target="_blank">{{ issue.project.key }}</a>
      <ng-container *ngIf="showEpic && issue.epic">
        <span class="separator">/</span>
        <a [href]="getEpicUrl()" 
           (click)="onHierarchyClick($event, 'epic')"
           class="hierarchy-link epic-key" 
           target="_blank">{{ issue.epic.key }}</a>
      </ng-container>
      <span class="separator">/</span>
      <a [href]="getIssueUrl()" 
         (click)="onHierarchyClick($event, 'issue')"
         class="hierarchy-link issue-key" 
         target="_blank">{{ issue.key }}</a>
    </div>
    <span
      class="status-badge"
      [style.background-color]="getStatusColor(issue.status.categoryKey)">
      {{ issue.status.name }}
    </span>
  </div>

  <!-- Issue Title -->
  <h3 class="issue-title">{{ issue.summary }}</h3>

  <!-- Issue Meta -->
  <div class="issue-meta">
    <div class="meta-item labels-container" *ngIf="issue.labels.length > 0">
      <span *ngFor="let label of issue.labels.slice(0, 3)" class="label">
        {{ label }}
      </span>
      <span *ngIf="issue.labels.length > 3" class="label-more">
        +{{ issue.labels.length - 3 }}
      </span>
    </div>
  </div>

  <!-- Issue Footer -->
  <div class="issue-footer">
    <div class="footer-left">
      <div class="assignee" *ngIf="issue.assignee">
        <img
          [src]="issue.assignee.avatarUrl"
          [alt]="issue.assignee.displayName"
          class="avatar">
        <span>{{ issue.assignee.displayName }}</span>
      </div>

      <div class="priority-badge" *ngIf="issue.priority">
        <span
          class="issue-priority"
          [style.color]="getPriorityColor(issue.priority.name || 'No Priority')">
          {{ issue.priority.name || 'No Priority' }}
        </span>
      </div>

      <div class="subtasks" *ngIf="issue.subtasks && issue.subtasks.length > 0">
        <span class="meta-icon">ðŸ“‹</span>
        <span>{{ issue.subtasks.length }} subtasks</span>
      </div>
    </div>

    <div class="footer-right">
      <mat-icon class="type-icon">{{ getTypeIcon(issue.type.name) }}</mat-icon>
      <span class="type-name">{{ issue.type.name }}</span>
    </div>
  </div>

  <!-- Due Date (if exists and not done) -->
  <div class="issue-duedate" *ngIf="issue.dueDate && issue.status.categoryKey !== 'done'">
    <span class="meta-icon">ðŸ“…</span>
    <span>Due: {{ issue.dueDate | date:'MMM d, y' }}</span>
  </div>
</div>
